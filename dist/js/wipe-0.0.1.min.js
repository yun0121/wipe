/*!wipe-hog 0.0.1 发布日期:2018-11-12*/
var cas=document.getElementById("cas"),context=cas.getContext("2d"),x1=0,y1=0,c=0,radius=20,isMouseDown=!1;function drawMask(e){e.fillStyle="#666",e.fillRect(0,0,cas.width,cas.height),e.globalCompositeOperation="destination-out"}function drawcav(e,t,n){e.beginPath(),e.arc(t,n,radius,0,2*Math.PI),e.fillStyle="red",e.fill()}function drawLine(e,t,n,a,o){e.save(),e.beginPath(),e.lineCap="round",e.lineWidth=2*radius,e.moveTo(t,n),e.lineTo(a,o),e.stroke(),e.restore()}function fn1(e){if(isMouseDown){var t=e||window.event,n=t.clientX,a=t.clientY;drawLine(context,x1,y1,n,a),x1=n,y1=a}}function clearRect(e){e.clearRect(0,0,cas.width,cas.height)}function getTranspar(e){var t=e.getImageData(0,0,cas.width,cas.height);console.log(t);for(var n=0;n<cas.height;n++)for(var a=0;a<cas.width;a++){cas.width,cas.width,cas.width;var o=4*(cas.width*n+a)+3;0===t.data[o]&&c++}var i=c/(cas.width*cas.height)*100;return console.log(i),Math.round(i)}cas.addEventListener("mousedown",function(e){isMouseDown=!0,console.log(isMouseDown);var t=e||window.event;x1=t.clientX,y1=t.clientY,drawcav(context,t.clientX,t.clientY)},!1),cas.addEventListener("mousemove",fn1,!1),cas.addEventListener("mouseup",function(){isMouseDown=!1,65<getTranspar(context)&&clearRect(context),console.log(isMouseDown)},!1),window.onload=function(){drawMask(context)};