/*!wipe-hog 1.0.0 发布日期:2018-11-13*/
var cas=document.getElementById("cas"),context=cas.getContext("2d"),x1=0,y1=0,c=0,radius=20,phone1="",phone2="",phone3="",isMouseDown=!1,device=/android|webos|iPhone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());function drawMask(e){e.fillStyle="#666",e.fillRect(0,0,cas.width,cas.height),e.globalCompositeOperation="destination-out"}function draw(e,t,n,o,i){3===arguments.length?(e.beginPath(),e.arc(t,n,radius,0,2*Math.PI),e.fillStyle="red",e.fill()):(e.save(),e.beginPath(),e.lineCap="round",e.lineWidth=2*radius,e.moveTo(t,n),e.lineTo(o,i),e.stroke(),e.restore())}function fn2(e){if(isMouseDown){var t=e||window.event;t.preventDefault();var n=device?t.touches[0].clientX:t.clientX,o=device?t.touches[0].clientY:t.clientY;draw(context,x1,y1,n,o),x1=n,y1=o}}function clearRect(e){e.clearRect(0,0,cas.width,cas.height)}function getTranspar(e){var t=e.getImageData(0,0,cas.width,cas.height);console.log(t);for(var n=0;n<cas.height;n++)for(var o=0;o<cas.width;o++){cas.width,cas.width,cas.width;var i=4*(cas.width*n+o)+3;0===t.data[i]&&c++}var a=c/(cas.width*cas.height)*100;return console.log(a),Math.round(a)}console.log(device),phone3=device?(phone1="touchstart",phone2="touchmove","touchend"):(phone1="mousedown",phone2="mousemove","mouseup"),cas.addEventListener(phone1,function(e){isMouseDown=!0,y1=device?(x1=event.touches[0].clientX,event.touches[0].clientY):(x1=event.clientX,event.clietY),draw(context,x1,y1)},!1),cas.addEventListener(phone2,fn2,!1),cas.addEventListener(phone3,function(){isMouseDown=!1,65<getTranspar(context)&&clearRect(context),console.log(isMouseDown)},!1),window.onload=function(){drawMask(context)};